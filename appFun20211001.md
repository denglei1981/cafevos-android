#  App事件  #

#####*20211027更新*
更新时间 | 更新内容  
------- | -------  
2021.10.01 | 整理H5交互时间
2021.10.27|完善APP事件
2021.11.2|增加跳邀请新用户
2021.11.8|H5设置状态栏字体颜色

### <font color="#FF0000">所有方法均需用FORDApp调用， 回调方法参考登录回调</font> 

##### 1.加密

```
var result = FORDAPP.encryKey("16位随机字符串key")
```

##### 2.解密

```
var result = FORDAPP.decrypt("需要解密的字符串","16位随机字符串key")
```

##### 3.签名
```
// type String: 0埋点签名  1为其他接口签名
var result = FORDApp.sign(str, type)
```

##### 4.获取token
```
var token = FORDApp.getToken()
```
##### 5.关闭webview
```
// 0或者不传 关闭当前页面
//
FORDApp.closePage(value:Int)
```

##### 6.打开APP子页面
```
var param = {"jumpDataType": 1, "jumpDataValue": "https://www.baidu.com"}
FORDApp.openPage(JSON.stringify(param))
```
跳转类型集合
----------

type | value | 说明
-----|-----|-----
'99'  |=> |'不跳转',
'100' |=> |'登录页面',
 '101' |=> |'发现',
 '102' |=> |'社区',
 '103' |=> |'爱车',
 '104' |=> |'商城',
 '105' |=> |'我的',
 '107'|=>|H5页面，需要登录，需要绑定手机号
'108'|type|聚合搜索【type传0-4，默认0】
'109'|goodsInfo|商品订单确认【砍价功能】
 '10000'  |=> |'H5外部跳转(打开浏览器)',
 '1'   |h5链接或参数 |'H5页面',
 '2'   |artId |'资讯详情',
 '3'   |spuId |'商品详情',
 '4'   |postsId |'帖子详情',
 '5'   |orderNo |商城订单详情,
 '6    | circleId| '圈子详情',
 '7'    | => | '专题列表',
 '8'    |specialTopicId| '专题详情',
 '9'    |topicId| '话题详情',
 '10'  |=> |'成长值详情',
 '11'   |=> |'填写意见反馈'
 '12'    |=> | '去发布调查',
 '13'    |=> | '去发布活动',
 '14'    |=> | '去发帖'【跳转到社区页面】,
 '16'  |=> |任务中心,
 '17'  |=> |'车主认证'【此功能暂未开放】,
 '18'    |=> | '绑定手机号',
 '19'  |=> |'小程序',
 '20'  |=> |'地址管理',
 '21'    |=> | '设置',
 '22' |=>|会员身份,
 '23'  |=> |'我的发布',
 '24'  |=> |'我的消息',
 '25'  |=> |'我的关注',
 '26'  |=> |'我的活动',
 '27' |=>|'我的收藏',
 '28'  |=> |'我的圈子',
 '29'  |=> |我的勋章,
 '30'   |=>  |积分纪录,
 '32'  |=> |‘成长值',
 '34'  |=> |用户个人信息页面,
 '35'  |=> |'他人主页',
 '36'  |=> |聚合订单列表页, 
 '37'|=>|签到
'38'|=>|我的足迹
 '39'|=>|常见问题
'40'|=>|我的粉丝
'42'|=>|意见反馈记录
'44'|=>|邀请新用户
'47'|messageType|(1->系统消息 2->互动消息 3->交易消息) |消息列表
'48'|=>|秒杀列表,
'52'|=>|商城订单列表
'55'|=>|月签到详情
'59'|toast消息|弹出一个toast内容
'60'|{"content":"弹框的内容","buttons":[{"btName":"按钮内容","jumpData":{"jumpDataType":"xx","jumpDataValue":"xx"}}]}|弹出一个弹框，内容，按钮及跳转在value中返回
'61'|=>|扫一扫
'71'|=>|跳转新版意见反馈页面
'73'|=>|需要位置权限的H5



##### 7.跳转到app登陆界面

```
function loginCallBack(a) {
		//登录回调
      alert("字串回调-" + a)
}
FORDApp.loginApp("loginCallBack")
```

##### 8.IOS的禁止回弹效果
```
// 仅ios有此方法
FORDApp.setBounces(false)
```

##### 9.上传图片
```
/**
* 上传图片，img = base64串，
* callback = 回调一个http连接
**/
FORDApp.uploadImgData(img, "callback")

```

##### 10.复制到剪切板
```
FORDApp.copyText("")
```

##### 11.分享
```
var data = {
  shareTitle:"", // 分享标题[必传]
	shareUrl:"", // 分享链接[必传]
	shareImg:"", // 分享icon[必传]
	shareDesc:"",  // 分享描述[必传]
	shareType: 1, // 
	isImg: "0", // 是否为分享纯图片（1 是 0 否）
	isMiniProgram: "1", // 是否分享微信小程序（可选）
}
FORDApp.shareTo(JSON.stringify(data), "shareCallBack")
```

##### 12.头部设置
```
// title: 标题  style:右上角接受自定义（包括样式自定义） subcallback:点击事件回调
var style = {
	text = "标题"
	color = "文字颜色"
	image = "图片地址 / 有标题再设置图片地址不会生效"
}
FORDApp.setNavTitle(title, JSON.stringify(style), 'callback')
```

##### 13.支付
```
/**
 * payCode: 1-支付宝， 2-微信
 * param: 支付字符串
 * callback：支付成功回调
 */
FORDApp.openPay(payCode, param, "callback")
```

#### 14.显示隐藏导航栏
```
FORDApp.isNavigationHidden(bool)
```


#### 15.选择一张图片，返回base64串
```
/**
 * 选择一张图片
 * @param 回调，传回一张图片的base64串
 */
FORDApp.choseImg("callback")
```

#### 16. 缓存到本地一个json
```
 FORDApp.setSessionStorage(key, value)
```
#### 16. 从本地读取缓存
```
let json = FORDApp.getSessionStorage(key)
```
#### 17. 删除本地缓存
```
FORDApp.delegateSessionStorage(key)
```
#### 18. 上传based64图片
```
function callback(imgPath) {
	// path
}
FORDApp.uploadImgData(imgString, "callback")
```

#### 19. 获取位置信息
```
var callbackResultStr = {"latitude": fir.latitude,
                         "longitude": fir.longitude,
                         "cityCode": code,
                         "address": address}
FORDApp.getLocation("callback")
```

#### 20. 获取导航高度
```
var height = FORDApp.getNaviHeight()
```

#### 21 图片浏览
```
/**
* imgArr 图片数组
* index 当前显示第几个
*/
var imgArr = [String]
FORDApp.showPhotoBrowser(JSON.stringify(imgArr), 0)
```

#### 22 选择地址 
```
FORDApp.selectAddress("callback")
```
#### 23 获取app版本
```
var version = FORDApp.getAppVersion()
```

#### 24. 显示404页面
```
FORDApp.showError404()
```

#### 25. 获取用户信息
```
FORDApp.getMyInfo("callback")
```
#### 26. 扫码
```
FORDApp.showScan("callbacl")
```

#### 27. 保存图片
```
FORDApp.saveImg(imgUrl, "callback")
```
#### 28. 获取手机信息
```
/**
{"deviceId": uuid,
 "brand": "苹果",
 "model": "iphone 11"}
*/
var result = FORDApp.getDeviceInfo()
```

#### 29. 设置状态栏字体的颜色
```
/**
* color 0是白，1是黑
     */
    @JavascriptInterface
    fun setStatusBarTextColor(color:Int)
```